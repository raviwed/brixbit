{"version":3,"file":"index.js","sources":["../../src/constants.ts","../../src/converters.ts","../../src/errors.ts","../../src/utils.ts","../../src/proxy.ts","../../src/client.ts"],"sourcesContent":[null,null,null,null,null,null],"names":["OPEN_FRAMES_PROXY_URL","PROTOCOL_VERSION","toSignedPublicKey","v1Key","signedByWallet","signature","Error","v1Signature","walletEcdsaCompact","ecdsaCompact","undefined","keyBytes","pubKey","publicKey","PublicKey","encode","timestamp","secp256k1Uncompressed","finish","v1ToV2Bundle","v1Bundle","identityKey","preKey","InvalidArgumentsError","b64Encode","fetcher","base64Encode","input","length","buildOpaqueIdentifier","inputs","sha256","arrays","Uint8Array","reduce","acc","arr","concat","Array","from","concatArrays","groupId","groupSecret","conversationTopic","participantAccountAddresses","TextEncoder","join","concatStringsToBytes","toLowerCase","map","p","sort","isReactNativeClient","client","assertedClient","sign","exportPublicKeyBundle","OpenFramesProxy","inner","constructor","baseUrl","this","BaseProxy","readMetadata","url","post","payload","postRedirect","postTransaction","mediaUrl","startsWith","FramesClient","brixbitClient","proxy","signFrameAction","opaqueConversationIdentifier","frameUrl","buttonIndex","inputText","state","address","transactionId","now","Date","toSign","Long","fromNumber","unixTimestamp","signedAction","buildSignedFrameAction","clientProtocol","untrustedData","walletAddress","trustedData","messageBytes","actionBodyInputs","actionBody","frames","FrameActionBody","digest","signDigest","publicKeyBundle","getPublicKeyBundle","FrameAction","signedPublicKeyBundle","signatureBytes","kind","signatureProto","Signature","decode","keystore","prekeyIndex","bundleBytes","publicKeyProto","PublicKeyBundle"],"mappings":"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"}