{"version":3,"file":"index.js","sources":["../../src/Attachment.ts","../../src/encryption.browser.ts","../../src/RemoteAttachment.ts"],"sourcesContent":[null,null,null],"names":["ContentTypeAttachment","ContentTypeId","authorityId","typeId","versionMajor","versionMinor","AttachmentCodec","contentType","encode","content","type","parameters","filename","mimeType","data","decode","fallback","crypto","window","ContentTypeRemoteAttachment","RemoteAttachmentCodec","load","remoteAttachment","codecRegistry","response","fetch","url","payload","Uint8Array","arrayBuffer","Error","digestBytes","subtle","digest","secp","utils","bytesToHex","contentDigest","ciphertext","Ciphertext","aes256GcmHkdfSha256","hkdfSalt","salt","gcmNonce","nonce","encodedContentData","decrypt","secret","encodedContent","proto","EncodedContent","codec","codecFor","encodeEncrypted","getRandomValues","finish","encrypt","startsWith","scheme","contentLength","String","TextEncoder","TextDecoder","hexToBytes","parseInt"],"mappings":"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"}